<h1 mat-dialog-title class="title">Ajouter une mission</h1>
<div mat-dialog-content class="content">
    <form [formGroup]="storeForm">
        <div class="field-container">
            <mat-form-field>
                <mat-label>Nom</mat-label>
                <input matInput formControlName="name" />
                <mat-error *ngIf="storeForm.controls.name.hasError('required')">Champ obligatoire *</mat-error>
            </mat-form-field>
        </div>
        <div class="field-container">
            <mat-form-field>
                <mat-label>Adresse du store</mat-label>
                <input matInput formControlName="address" />
                <mat-error *ngIf="storeForm.controls.address.hasError('required')">Champ obligatoire *</mat-error>
            </mat-form-field>
        </div>
        <div class="field-container">
            <mat-form-field>
                <mat-label>Région</mat-label>
                <mat-select formControlName="region" (selectionChange)="updateSubRegionsList($event.value)">
                    <mat-option *ngFor="let item of availableRegions" [value]="item">
                        {{item.name}}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="storeForm.controls.region.hasError('required')">Champ obligatoire *</mat-error>
            </mat-form-field>
        </div>
        <div class="field-container">
            <mat-form-field>
                <mat-label>Sous-régions</mat-label>
                <mat-select formControlName="subReg">
                    <mat-option *ngFor="let item of filteredSubRegions" [value]="item">
                        {{item.name}}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="storeForm.controls.subReg.hasError('required')">Champ obligatoire *</mat-error>
            </mat-form-field>
        </div>
    </form>
    <span *ngIf="failedToAdd===true" class="failed-info">Impossible d'ajouter la boutique!</span>
    <span *ngIf="storeAdded===true" class="success-info">Boutique ajoutée.</span>
    <span *ngIf="storeExist===true" class="failed-info">Un boutique du même nom existe déjà dans cette adresse!</span>
</div>
<div mat-dialog-actions class="mission-dialog-footer" align="end">
    <button mat-button [mat-dialog-close]="availableStores">Annuler</button>
    <button mat-button [disabled]="!storeForm.valid" (click)="addStore()">Enregistrer</button>
</div>
<!-- ------------------------------- -->
<div *ngIf="inProgress===true" class="progress-spinner-container">
  <mat-spinner></mat-spinner>
</div>